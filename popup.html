<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minimalist Task Manager</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- The task-manager-view is a logical container. Its children are the direct grid items -->
        <div class="task-manager-view">
            <!-- Grid Item 1: Main Content Area -->
            <div class="main-content">
                <div class="task-card" data-list-id="today">
                    <div class="list-header">
                        <h3 class="list-title" title="Double-click to rename">Daily Tasks</h3>
                        <button class="edit-list-btn" title="Edit list name"><i class="fas fa-edit"></i></button>
                    </div>
                    <ul id="today-task-list"></ul>
                    <div class="add-task">
                        <input type="text" id="new-today-task" placeholder="Add a new task...">
                        <button id="add-today-task-btn" title="Add Task"><i class="fas fa-plus"></i></button>
                    </div>
                </div>
                <div class="task-card" data-list-id="weekly">
                    <div class="list-header">
                        <h3 class="list-title" title="Double-click to rename">Weekly Tasks</h3>
                        <button class="edit-list-btn" title="Edit list name"><i class="fas fa-edit"></i></button>
                    </div>
                    <ul id="weekly-task-list"></ul>
                     <div class="add-task">
                        <input type="text" id="new-weekly-task" placeholder="Add a new task...">
                        <button id="add-weekly-task-btn" title="Add Task"><i class="fas fa-plus"></i></button>
                    </div>
                </div>
            </div>

            <!-- Grid Item 2: Right Sidebar -->
            <div class="right-sidebar">
                <div class="top-right-info">
                    <div class="clock-group">
                        <div class="time"></div>
                        <div class="day"></div>
                        <div class="date"></div>
                    </div>
                <div class="icons">
                        <button class="settings-toggle" title="Settings">
                            <i class="fas fa-cog"></i>
                        </button>
                         <div class="dark-mode-toggle-container">
                             <label class="switch" title="Toggle Dark/Light Mode">
                                 <input id="dark-mode-checkbox" type="checkbox" />
                                 <div class="slider round">
                                     <div class="sun-moon">
                                         <svg id="moon-dot-1" class="moon-dot" viewBox="0 0 100 100">
                                             <circle cx="50" cy="50" r="50"></circle>
                                         </svg>
                                         <svg id="moon-dot-2" class="moon-dot" viewBox="0 0 100 100">
                                             <circle cx="50" cy="50" r="50"></circle>
                                         </svg>
                                         <svg id="moon-dot-3" class="moon-dot" viewBox="0 0 100 100">
                                             <circle cx="50" cy="50" r="50"></circle>
                                         </svg>
                                         <svg id="light-ray-1" class="light-ray" viewBox="0 0 100 100">
                                             <circle cx="50" cy="50" r="50"></circle>
                                         </svg>
                                         <svg id="light-ray-2" class="light-ray" viewBox="0 0 100 100">
                                             <circle cx="50" cy="50" r="50"></circle>
                                         </svg>
                                         <svg id="light-ray-3" class="light-ray" viewBox="0 0 100 100">
                                             <circle cx="50" cy="50" r="50"></circle>
                                         </svg>
                                         <svg id="cloud-1" class="cloud-dark" viewBox="0 0 100 100">
                                             <circle cx="50" cy="50" r="50"></circle>
                                         </svg>
                                         <svg id="cloud-2" class="cloud-dark" viewBox="0 0 100 100">
                                             <circle cx="50" cy="50" r="50"></circle>
                                         </svg>
                                         <svg id="cloud-3" class="cloud-dark" viewBox="0 0 100 100">
                                             <circle cx="50" cy="50" r="50"></circle>
                                         </svg>
                                         <svg id="cloud-4" class="cloud-light" viewBox="0 0 100 100">
                                             <circle cx="50" cy="50" r="50"></circle>
                                         </svg>
                                         <svg id="cloud-5" class="cloud-light" viewBox="0 0 100 100">
                                             <circle cx="50" cy="50" r="50"></circle>
                                         </svg>
                                         <svg id="cloud-6" class="cloud-light" viewBox="0 0 100 100">
                                             <circle cx="50" cy="50" r="50"></circle>
                                         </svg>
                                     </div>
                                     <div class="stars">
                                         <svg id="star-1" class="star" viewBox="0 0 20 20">
                                             <path d="M 0 10 C 10 10,10 10 ,0 10 C 10 10 , 10 10 , 10 20 C 10 10 , 10 10 , 20 10 C 10 10 , 10 10 , 10 0 C 10 10,10 10 ,0 10 Z"></path>
                                         </svg>
                                         <svg id="star-2" class="star" viewBox="0 0 20 20">
                                             <path d="M 0 10 C 10 10,10 10 ,0 10 C 10 10 , 10 10 , 10 20 C 10 10 , 10 10 , 20 10 C 10 10 , 10 10 , 10 0 C 10 10,10 10 ,0 10 Z"></path>
                                         </svg>
                                         <svg id="star-3" class="star" viewBox="0 0 20 20">
                                             <path d="M 0 10 C 10 10,10 10 ,0 10 C 10 10 , 10 10 , 10 20 C 10 10 , 10 10 , 20 10 C 10 10 , 10 10 , 10 0 C 10 10,10 10 ,0 10 Z"></path>
                                         </svg>
                                         <svg id="star-4" class="star" viewBox="0 0 20 20">
                                             <path d="M 0 10 C 10 10,10 10 ,0 10 C 10 10 , 10 10 , 10 20 C 10 10 , 10 10 , 20 10 C 10 10 , 10 10 , 10 0 C 10 10,10 10 ,0 10 Z"></path>
                                         </svg>
                                     </div>
                                 </div>
                             </label>
                         </div>
                    </div>
                </div>


                <!-- AI Tools Panel -->
                <div class="ai-tools-panel">
                    <div class="ai-links-vertical">
                        <button class="add-tool-button">+</button>
                    </div>
                </div>
                
                <!-- AI Tools Toggle Arrow -->
                <div class="ai-tools-toggle" title="Show/Hide AI Tools">
                    <i class="fas fa-chevron-left"></i>
                </div>
            </div>
        </div>

        <!-- Quick Notes Container -->
        <div class="quick-notes-container">
            <button class="quick-notes-icon" title="Quick Notes (Ctrl+S)">
                <i class="fas fa-sticky-note"></i>
            </button>
            <div class="quick-notes-panel">
                <div class="quick-notes-controls">
                    <button class="font-size-btn" data-action="decrease" title="Decrease font size">A-</button>
                    <button class="font-size-btn" data-action="increase" title="Increase font size">A+</button>
                </div>
                <textarea placeholder="Write your thoughts here..."></textarea>
                <div class="quick-notes-resize-handle" title="Resize"></div>
            </div>
        </div>

        <button class="meditation-trigger" title="Enter Meditation Zone">
             <div class="sine-wave">
                 <div class="wave-line"></div>
                 <div class="wave-line"></div>
                 <div class="wave-line"></div>
             </div>
        </button>
        
        <!-- Meditation View (Complete) -->
        <div class="meditation-view">
            <div class="meditation-background-layer"></div>
            <div class="meditation-background-layer"></div>
            <div class="meditation-background-layer"></div>
            <div class="prepare-message">Prepare to relax</div>
            <div class="meditation-content">
                <div class="breathing-bubble">
                    <div class="meditation-timer" title="Click to edit duration">5:00</div>
                </div>
                <div class="meditation-timer-group">
                    <input type="number" id="meditation-duration-input" class="meditation-duration-input" min="1" value="5">
                </div>
                <div class="meditation-controls-horizontal">
                    <button id="meditation-duration-input-minus" class="meditation-time-control-circular" title="Decrease time"><i class="fas fa-minus"></i></button>
                    <button class="start-stop-meditation">Start</button>
                    <button id="meditation-duration-input-plus" class="meditation-time-control-circular" title="Increase time"><i class="fas fa-plus"></i></button>
                </div>
            </div>
            <div class="meditation-controls-bottom">
                <div class="meditation-mode-selector"></div>
                <div class="volume-controls-group">
                    <!-- Mute button is dynamically added here by JS -->
                    <div class="volume-level-indicator">
                        <div class="volume-bar" data-level="1"></div>
                        <div class="volume-bar" data-level="2"></div>
                        <div class="volume-bar" data-level="3"></div>
                        <div class="volume-bar" data-level="4"></div>
                        <div class="volume-bar" data-level="5"></div>
                    </div>
                </div>
            </div>
        </div>
        

        
        <!-- Custom Tool Modal (Complete) -->
        <div id="custom-tool-modal" class="modal">
            <div class="modal-content">
                <span class="close-modal" title="Close">&times;</span>
                <h2>Add Custom AI Tool</h2>
                <label for="tool-label">Tool Label:</label>
                <input type="text" id="tool-label" placeholder="e.g., Mistral">
                <label for="tool-url">Tool URL (https://):</label>
                <input type="text" id="tool-url" placeholder="e.g., https://mistral.ai/">
                <button id="add-custom-tool">Add Tool</button>
            </div>
        </div>

        <!-- Edit Tool Modal -->
        <div id="edit-tool-modal" class="modal">
            <div class="modal-content">
                <span class="close-modal" title="Close">&times;</span>
                <h2>Edit AI Tool</h2>
                <label for="edit-tool-label">Tool Label:</label>
                <input type="text" id="edit-tool-label" placeholder="e.g., ChatGPT">
                <label for="edit-tool-url">Tool URL (https://):</label>
                <input type="text" id="edit-tool-url" placeholder="e.g., https://chat.openai.com/">
                <button id="save-edit-tool">Save Changes</button>
            </div>
        </div>

        <!-- Settings Overlay -->
        <div id="settings-overlay" class="settings-overlay" aria-hidden="true">
            <div class="settings-backdrop"></div>
            <aside class="settings-panel" role="dialog" aria-modal="true" aria-labelledby="settings-title">
                <div class="settings-panel-header">
                    <h2 id="settings-title">Settings</h2>
                    <button class="settings-close-btn" title="Close Settings">
                        <i class="fas fa-times"></i>
                    </button>
                </div>

                <section class="settings-section">
                    <h3>Display</h3>
                    <div class="setting-item">
                        <label for="font-size-select">Font Size</label>
                        <select id="font-size-select">
                            <option value="small">Small</option>
                            <option value="medium">Medium (Default)</option>
                            <option value="large">Large</option>
                        </select>
                    </div>
                    <div class="setting-item checkbox-item">
                        <input type="checkbox" id="custom-cursor-toggle">
                        <label for="custom-cursor-toggle">Enable Zen Cursor Mode</label>
                    </div>
                </section>

            <section class="settings-section">
                <h3>Behavior</h3>
                <div class="setting-item checkbox-item">
                    <input type="checkbox" id="keep-quick-links-visible">
                    <label for="keep-quick-links-visible">Keep Quick Links Visible</label>
                </div>
            </section>

            <section class="settings-section">
                <h3>Statistics</h3>
                <div class="setting-item stats-summary">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <span class="stat-label">Meditation Time</span>
                            <span class="stat-value" id="stat-meditation-time">0h 0m</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-label">Meditation Sessions</span>
                            <span class="stat-value" id="stat-meditation-sessions">0</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-label">Tasks Completed</span>
                            <span class="stat-value" id="stat-tasks-completed">0</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-label">Tasks Closed</span>
                            <span class="stat-value" id="stat-tasks-closed">0</span>
                        </div>
                    </div>
                    <div class="settings-actions">
                        <button id="view-stats-btn" class="settings-action-btn">
                            View Detailed Stats
                        </button>
                        <button id="reset-stats-btn" class="settings-action-btn danger">
                            Reset Statistics
                        </button>
                    </div>
                </div>
            </section>
            </aside>
        </div>

        <!-- Stats Overlay -->
        <div id="stats-overlay" class="stats-overlay" aria-hidden="true">
            <div class="stats-backdrop"></div>
            <div class="stats-panel" role="dialog" aria-modal="true" aria-labelledby="stats-title">
                <div class="stats-header">
                    <div class="stats-header-main">
                        <button class="stats-close-btn" title="Back to Settings">
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        <div>
                            <h2 id="stats-title">Productivity Insights</h2>
                            <p class="stats-subtitle">Explore your meditation and task trends</p>
                        </div>
                    </div>
                    <div class="stats-period-controls">
                        <button class="stats-period-btn active" data-period="all">All Time</button>
                        <button class="stats-period-btn" data-period="daily">Daily</button>
                        <button class="stats-period-btn" data-period="weekly">Weekly</button>
                        <button class="stats-period-btn" data-period="monthly">Monthly</button>
                        <button class="stats-period-btn" data-period="yearly">Yearly</button>
                    </div>
                </div>

                <div class="stats-content">
                    <section class="stats-section">
                        <h3>Meditation</h3>
                        <div class="stats-cards-grid">
                            <article class="stats-large-card">
                                <header>
                                    <span>Total Time</span>
                                    <small class="stats-trend" id="meditation-time-trend"></small>
                                </header>
                                <strong id="stats-meditation-total">0h 0m</strong>
                                <footer>
                                    <span>Average Session</span>
                                    <strong id="stats-meditation-average">0m</strong>
                                </footer>
                            </article>
                            <article class="stats-card">
                                <span>Sessions Completed</span>
                                <strong id="stats-meditation-sessions">0</strong>
                            </article>
                            <article class="stats-card">
                                <span>Favorite Mode</span>
                                <strong id="stats-meditation-favorite">—</strong>
                            </article>
                        </div>
                    </section>

                    <section class="stats-section">
                        <h3>Tasks</h3>
                        <div class="stats-cards-grid">
                            <article class="stats-large-card">
                                <header>
                                    <span>Tasks Completed</span>
                                    <small class="stats-trend" id="tasks-completed-trend"></small>
                                </header>
                                <strong id="stats-tasks-completed">0</strong>
                                <footer>
                                    <span>Completion Rate</span>
                                    <strong id="stats-tasks-completion-rate">0%</strong>
                                </footer>
                            </article>
                            <article class="stats-card">
                                <span>Tasks Closed</span>
                                <strong id="stats-tasks-closed">0</strong>
                            </article>
                            <article class="stats-card">
                                <span>Most Productive Day</span>
                                <strong id="stats-tasks-productive-day">—</strong>
                            </article>
                        </div>
                    </section>

                    <section class="stats-section stats-history">
                        <h3>Session History</h3>
                        <div class="stats-history-table">
                            <header>
                                <span>Date</span>
                                <span>Meditation</span>
                                <span>Tasks Completed</span>
                                <span>Tasks Closed</span>
                            </header>
                            <div id="stats-history-rows" class="stats-history-rows">
                                <p class="stats-empty">Start meditating and completing tasks to see your history here.</p>
                            </div>
                        </div>
                    </section>
                </div>
            </div>
        </div>
        
        <div id="toast-container"></div>
        
        <!-- Cursor Follower Elements -->
        <div class="cursor-dot"></div>
        <div class="cursor-circle"></div>
    </div>
    <script src="js/popup.js"></script>
</body>
</html>
